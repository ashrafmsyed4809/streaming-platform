tenant:
  tenant_id: "tenant_demo"
  site_id_default: "site_demo"

ingestion:
  source: "eventhub"
  eventhub_name: "iot-sensor-events"
  consumer_group: "$Default"
  source_id: "sht4x_pi_01"

storage:
  base_path: "abfss://streaming@dataengineeringstor.dfs.core.windows.net/platform"

events:
  allowed_event_types:
    - "temp_humidity.v1"
    - "temp_humidity.v2"

  device_registry:
    pi-001: "temp_humidity.v1"
    pi-002: "temp_humidity.v1"

# =========================
# Gold (Option C) - Batch
# =========================
gold:
  curated:
    enabled: true
    output_subpath: "gold_curated"

  metrics:
    enabled: true
    output_subpath: "gold_metrics"

  # Batch execution mode
  # daily: runs for run_date (or today UTC) with optional lookback_days
  # range: runs between start_date and end_date (inclusive)
  mode: "daily"           # daily | range
  run_date: ""            # optional YYYY-MM-DD (blank = today UTC)
  lookback_days: 1        # process last N days (1 = only run_date)

  # Per event_type options (20% configurable)
  event_types:
    temp_humidity.v1:
      metrics:
        grain: "hour"
    temp_humidity.v2:
      metrics:
        grain: "hour"