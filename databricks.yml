bundle:
  name: streaming_platform

# Bundle resources (jobs/pipelines). Keep this.
include:
  - "bundles/streaming_platform/jobs/*.yml"

# âœ… This is the missing piece: what files get uploaded to the workspace bundle root
sync:
  include:
    # Code / notebooks
    - "bundles/streaming_platform/src/**"

    # Tenant configs (your runners load these)
    - "configs/**"

    # If you have a projects folder your code references
    - "projects/**"

    # Optional: any shared libs/helpers you keep elsewhere
    # - "libs/**"
  exclude:
    - "**/.git/**"
    - "**/.github/**"
    - "**/__pycache__/**"
    - "**/*.pyc"
    - "**/*.pkl"
    - "**/*.env"
    - "**/secrets/**"

variables:
  run_minutes:
    description: "POC run duration in minutes. 0 means continuous (production)."
    default: 3

  tenant_id:
    description: "Tenant (client) identifier"
    default: "tenant_demo"

  config_file:
    description: "Path to tenant config file within the repo"
    default: "configs/tenants/tenant_demo/dev.yml"

targets:
  dev:
    default: true
    mode: development
    workspace:
      host: "https://adb-3060566723072813.13.azuredatabricks.net"
    variables:
      run_minutes: 1
      tenant_id: "tenant_demo"
      config_file: "configs/tenants/tenant_demo/dev.yml"

  stage:
    mode: development
    workspace:
      host: "https://adb-3060566723072813.13.azuredatabricks.net"
    variables:
      run_minutes: 10
      tenant_id: "tenant_demo"
      config_file: "configs/tenants/tenant_demo/stage.yml"

  prod:
    mode: production
    workspace:
      host: "https://adb-3060566723072813.13.azuredatabricks.net"
    variables:
      run_minutes: 0
      tenant_id: "tenant_demo"
      config_file: "configs/tenants/tenant_demo/prod.yml"